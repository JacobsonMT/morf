<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>morf</title>
	<h:outputStylesheet library="css" name="style.css" />
	<h:outputStylesheet library="css" name="showcase.css" />

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- Prevents caching at the Proxy Server -->

	<meta http-equiv="Expires" content="0" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="description"
		content="morf base description to be set at some point in the future." />

	<meta name="keywords"
		content="genomics,bioinformatics,genetics,gene,statistics,open source,software,fasta" />
	<meta name="author" content="morf admin (jacobsonmt@gmail.com)" />

</h:head>

<h:body>

<p:layout fullPage="true">

 	<p:layoutUnit id="top" position="north" resizable="false" size="50">
 	
 		Navbar
 	
 	</p:layoutUnit>
 
    <p:layoutUnit id="center" position="center">
    	<h3>FASTA Sequence</h3>
    	<h:form enctype="multipart/form-data">
		    <p:growl id="messages" showDetail="true" />
		 
		    <p:fileUpload value="#{fileUploadView.file}" mode="simple" skinSimple="true"/>
		 	
		    <p:commandButton value="Submit" ajax="false" actionListener="#{fileUploadView.upload}"/>
		</h:form>
		<br/>
        <h:form>            
		    <p:growl id="growl" life="2000" />
		    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
		    	<p:outputLabel for="inputName" value="Name: " />
			    <p:inputText id="inputName" value="#{indexView.name}"/>
			    
			    <p:outputLabel for="inputContent" value="Content: " />
			    <p:inputTextarea id="inputContent" value="#{indexView.content}" rows="10" cols="100" autoResize="false" />
		    </h:panelGrid>
		    <p:commandButton value="Ajax Submit" icon="ui-icon-disk" update="growl,:formJobs:tableJobs" actionListener="#{indexView.submitJob}" styleClass="ui-priority-primary" />

		</h:form>
		<br/>
		<p:separator/>
		<br/>
		<h:form id="formJobs">			
		    <p:dataTable id="tableJobs" var="job" value="#{userManager.jobs}" rowStyleClass="#{job.complete eq true ? 'green-row' : 'yellow-row'}">
		        <f:facet name="header">
		            Jobs
		        </f:facet>
		        <p:column headerText="Name">
		            <h:outputText value="#{job.name}" />
		        </p:column>
		        <p:column headerText="Submitted">
					<h:outputText value="#{job.submitted}" />
		        </p:column>
		        <p:column headerText="Complete">
					<h:outputText value="#{job.complete}" />
		        </p:column>
		        <p:column style="width:32px;text-align: center">
		             <p:commandButton update=":formJobs:jobDetail" oncomplete="PF('jobDialog').show()" icon="ui-icon-search" title="View">
		                <f:setPropertyActionListener value="#{job}" target="#{indexView.selectedJob}" />
		            </p:commandButton>
		        </p:column>
		    </p:dataTable>
			
		    <p:dialog header="Job Info" widgetVar="jobDialog" modal="false" showEffect="fade" hideEffect="fade" resizable="false">
		        <p:outputPanel id="jobDetail" style="text-align:center;">
		            <p:panelGrid  columns="2">	 
		                <h:outputText value="Name:" />
		                <h:outputText value="#{indexView.selectedJob.name}" />
		 
		                <h:outputText value="Content" />
		                <h:outputText value="#{indexView.selectedJob.content}" />
		                
		                <h:outputText value="Complete" />
		                <h:outputText value="#{indexView.selectedJob.complete}" />
		                
		                <h:outputText value="Result" />
		                <h:outputText value="#{indexView.selectedJob.result}" />
		            </p:panelGrid>
		        </p:outputPanel>
		    </p:dialog>
			<p:poll interval="3" update="tableJobs" />
		</h:form>
		<p>Method of viewing job position in queue</p>
    </p:layoutUnit>
    
    <p:layoutUnit id="bottom" position="south" resizable="false" size="50">
        <div class="footer">
				<p>
					&copy; UBC, Centre for High-throughput Biology, 2015
					<h:link value="Terms and Conditions" outcome="terms.xhtml" />
				</p>
		</div>
    </p:layoutUnit>
</p:layout>





</h:body>
</html>